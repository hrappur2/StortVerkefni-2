{"version":3,"sources":["script.js"],"names":[],"mappings":";;;;;;AAAA;;;IAGM,S;AACJ;;;;AAIA,uBAAc;AAAA;;AACZ,SAAK,OAAL,GAAe,WAAf;AACA,SAAK,SAAL,GAAiB,SAAS,aAAT,CAAuB,YAAvB,CAAjB;AACA,SAAK,IAAL,GAAY,SAAS,aAAT,CAAuB,MAAvB,CAAZ;;AAEA;AACA;AACA,SAAK,IAAL,CAAU,gBAAV,CAA2B,QAA3B,EAAqC,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAArC;AACD;;AAED;;;;;;;;2BAIO;AACL,UAAM,OAAO,KAAK,KAAL,CAAW,OAAO,YAAP,CAAoB,OAApB,CAA4B,KAAK,OAAjC,CAAX,CAAb;AACA,UAAI,IAAJ,EAAU;AACR,aAAK,MAAL,CAAY,KAAK,KAAjB,EAAwB,KAAK,IAA7B;AACD;AACD;AACD;;AAED;;;;;;;yBAIK,K,EAAO,I,EAAM;AAChB,aAAO,YAAP,CAAoB,OAApB,CAA4B,KAAK,OAAjC,EAA0C,KAAK,SAAL,CAAe,EAAE,YAAF,EAAS,UAAT,EAAf,CAA1C;AACA;AACD;;AAED;;;;;;;;2BAKO,C,EAAG;AACR,QAAE,cAAF;;AAEA,UAAM,QAAQ,KAAK,IAAL,CAAU,aAAV,CAAwB,kBAAxB,CAAd;AACA,UAAM,OAAO,KAAK,IAAL,CAAU,aAAV,CAAwB,kBAAxB,CAAb;AACA,UAAM,OAAO,KAAK,IAAL,CAAU,aAAV,CAAwB,kBAAxB,CAAb;;AAEA,UAAM,aAAa,KAAK,SAAL,CAAe,KAAK,KAApB,EAA2B,KAAK,KAAhC,CAAnB;;AAEA,WAAK,IAAL,CAAU,MAAM,KAAhB,EAAuB,UAAvB;;AAEA,WAAK,MAAL,CAAY,MAAM,KAAlB,EAAyB,UAAzB;AACD;;AAED;;;;;;;;;8BAMU,I,EAAM,I,EAAM;AACpB,aAAO,KAAK,KAAL,CAAW,IAAX,EAAiB,IAAjB,CAAP;AACD;;AAED;;;;;;;;;;;2BAQO,K,EAAO,I,EAAM;AAClB,WAAK,IAAL,GAAY,IAAZ;;AAEA,WAAK,QAAL;;AAEA,UAAM,UAAU,SAAS,aAAT,CAAuB,IAAvB,CAAhB;AACA,cAAQ,SAAR,CAAkB,GAAlB,CAAsB,oBAAtB;AACA,cAAQ,SAAR,GAAoB,KAApB;;AAEA,UAAM,MAAM,SAAS,aAAT,CAAuB,KAAvB,CAAZ;AACA,UAAI,SAAJ,CAAc,GAAd,CAAkB,sBAAlB;;AAEA,WAAK,OAAL,GAAe,GAAf;;AAEA,UAAM,SAAS,SAAS,aAAT,CAAuB,QAAvB,CAAf;AACA,aAAO,SAAP,CAAiB,GAAjB,CAAqB,QAArB;AACA,aAAO,SAAP,GAAmB,MAAnB;AACA,aAAO,gBAAP,CAAwB,OAAxB,EAAiC,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAjC;;AAEA,WAAK,SAAL,CAAe,WAAf,CAA2B,OAA3B;AACA,WAAK,SAAL,CAAe,WAAf,CAA2B,GAA3B;AACA,WAAK,SAAL,CAAe,WAAf,CAA2B,MAA3B;;AAEA,WAAK,YAAL;AACD;;AAED;;;;;;+BAGW;AACT,WAAK,IAAL,CAAU,SAAV,CAAoB,GAApB,CAAwB,cAAxB;AACD;;AAED;;;;;;+BAGW;AACT,WAAK,IAAL,CAAU,SAAV,CAAoB,MAApB,CAA2B,cAA3B;AACD;;AAED;;;;;;;mCAIe;AACb,WAAK,QAAL,GAAgB,OAAO,WAAP,CAAmB,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,CAAnB,EAA0C,IAA1C,CAAhB;AACD;;AAED;;;;;;kCAGc;AACZ,aAAO,aAAP,CAAqB,KAAK,QAA1B;AACD;;AAED;;;;;;;;;;;kCAQc,G,EAAK,K,EAAO;AACxB,UAAM,IAAI,SAAS,aAAT,CAAuB,KAAvB,CAAV;AACA,UAAM,IAAI,SAAS,aAAT,CAAuB,MAAvB,CAAV;AACA,UAAM,IAAI,SAAS,aAAT,CAAuB,MAAvB,CAAV;;AAEA,QAAE,SAAF,CAAY,GAAZ,CAAgB,gBAAhB;AACA,QAAE,SAAF,CAAY,GAAZ,CAAgB,gBAAhB;AACA,QAAE,SAAF,CAAY,GAAZ,CAAgB,kBAAhB;;AAEA,QAAE,SAAF,GAAc,GAAd;AACA,QAAE,SAAF,GAAc,KAAd;;AAEA,QAAE,WAAF,CAAc,CAAd;AACA,QAAE,WAAF,CAAc,CAAd;AACA,WAAK,OAAL,CAAa,WAAb,CAAyB,CAAzB;AACD;;AAED;;;;;;;;8BAKS;AACP,WAAK,SAAL,CAAe,SAAf,GAA2B,IAA3B;AACA,aAAO,YAAP,CAAoB,UAApB,CAA+B,KAAK,OAApC;AACA,WAAK,WAAL;AACA,WAAK,QAAL;AACD;;AAED;;;;;;;;;;8BAOU,S,EAAW;AACnB,UAAI,IAAI,YAAY,IAApB;;AAEA,UAAM,OAAO,KAAK,KAAL,CAAW,KAAK,KAAK,EAAL,GAAU,EAAf,CAAX,CAAb;AACA,WAAM,KAAK,EAAL,GAAU,EAAhB;AACA,UAAM,QAAQ,KAAK,KAAL,CAAW,KAAK,KAAK,EAAV,CAAX,CAAd;AACA,WAAM,KAAK,EAAX;AACA,UAAM,OAAO,KAAK,KAAL,CAAW,IAAI,EAAf,CAAb;AACA,WAAK,EAAL;AACA,UAAM,OAAO,KAAK,KAAL,CAAW,CAAX,CAAb;;AAEA,WAAK,aAAL,CAAmB,IAAnB,EAAyB,OAAzB;AACA,WAAK,aAAL,CAAmB,KAAnB,EAA0B,MAA1B;AACA,WAAK,aAAL,CAAmB,IAAnB,EAAyB,KAAzB;AACA,WAAK,aAAL,CAAmB,IAAnB,EAAyB,KAAzB;AACD;;AAED;;;;;;;;;;;4BAQQ;AACN,UAAM,YAAY,KAAK,IAAL,GAAY,KAAK,GAAL,EAA9B;AACA,WAAK,OAAL,CAAa,SAAb,GAAyB,IAAzB;AACA,UAAI,aAAa,CAAjB,EAAoB;AAClB,YAAM,IAAI,SAAS,aAAT,CAAuB,GAAvB,CAAV;AACA,UAAE,SAAF,GAAc,QAAd;AACA,UAAE,SAAF,CAAY,GAAZ,CAAgB,iBAAhB;AACA,aAAK,OAAL,CAAa,WAAb,CAAyB,CAAzB;AACA,aAAK,WAAL;AACD,OAND,MAMO;AACL,aAAK,SAAL,CAAe,SAAf;AACD;AACF;;;;;;AAGH,SAAS,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAM,YAAY,IAAI,SAAJ,EAAlB;AACA,YAAU,IAAV;AACD,CAHD","file":"script-compiled.js","sourcesContent":["/**\n * Niðurteljari!\n */\nclass Countdown {\n  /**\n   * Finnur container fyrir niðurteljara og form.\n   * Bindur submit eventhandler við form.\n   */\n  constructor() {\n    this.keyName = 'countdown';\n    this.container = document.querySelector('.countdown');\n    this.form = document.querySelector('form');\n\n    // til þess að submit hafi þennan klasa sem \"this\" verðum við\n    // að nota bind hér (og í öðrum föllum sem við bindum!)\n    this.form.addEventListener('submit', this.submit.bind(this));\n  }\n\n  /**\n   * Sækir gögn úr localStorage eftir this.keyName\n   * Ef gögn eru til, hleður þeim inn með því að kalla í this.create()\n   */\n  load() {\n    const data = JSON.parse(window.localStorage.getItem(this.keyName));\n    if (data) {\n      this.create(data.title, data.date);\n    }\n    // console.log(JSON.parse(window.localStorage.getItem(this.keyName)));\n  }\n\n  /**\n   * Tekur við title sem streng og date sem Date hlut\n   * Vistar sem json gögn í localStorage undir this.keyName\n   */\n  save(title, date) {\n    window.localStorage.setItem(this.keyName, JSON.stringify({ title, date }));\n    // console.log(JSON.stringify({ title, date }));\n  }\n\n  /**\n   * Handler fyrir submit á formi.\n   * Sækir gögn úr formi og kallar í this.parseDate()\n   * Vistar gögn með this.save() og sýnir niðurteljara með this.create()\n   */\n  submit(e) {\n    e.preventDefault();\n\n    const title = this.form.querySelector('input[type=text]');\n    const date = this.form.querySelector('input[type=date]');\n    const time = this.form.querySelector('input[type=time]');\n\n    const dateObject = this.parseDate(date.value, time.value);\n\n    this.save(title.value, dateObject);\n\n    this.create(title.value, dateObject);\n  }\n\n  /**\n   * Tekur við:\n   *  - date sem streng á forminu \"yyyy-mm-dd\", t.d. \"2017-11-06\"\n   *  - time sem streng á forminu \"hh:mm\", t.d. \"09:00\"\n   * Skilar date hlut með gögnum úr date og time\n   */\n  parseDate(date, time) {\n    return Date.parse(date, time);\n  }\n\n  /**\n   * Býr til element fyrir niðurteljara og bætir við this.container\n   * Setur this.date sem dagsetningu sem talið er niður að\n   * Setur this.element sem element sem geymir niðurteljara\n   * Bætir við \"eyða\" takka sem sér um að eyða niðurteljara með this.delete\n   * Byrjar niðurteljara með this.startCounter() og\n   * felur form með this.hideForm()\n   */\n  create(title, date) {\n    this.date = date;\n\n    this.hideForm();\n\n    const heading = document.createElement('h2');\n    heading.classList.add('countdown__heading');\n    heading.innerHTML = title;\n\n    const div = document.createElement('div');\n    div.classList.add('countdown__container');\n\n    this.element = div;\n\n    const button = document.createElement('button');\n    button.classList.add('button');\n    button.innerHTML = 'Eyða';\n    button.addEventListener('click', this.delete.bind(this));\n\n    this.container.appendChild(heading);\n    this.container.appendChild(div);\n    this.container.appendChild(button);\n\n    this.startCounter();\n  }\n\n  /**\n   * Felur form með CSS\n   */\n  hideForm() {\n    this.form.classList.add('form__hidden');\n  }\n\n  /**\n   * Sýnir form með CSS\n   */\n  showForm() {\n    this.form.classList.remove('form__hidden');\n  }\n\n  /**\n   * Byrjar niðurteljara með this.count() og keyrir á 1000ms fresti\n   * með window.setInterval og setur id á teljara í this.interval\n   */\n  startCounter() {\n    this.interval = window.setInterval(this.count.bind(this), 1000);\n  }\n\n  /**\n   * Stöðvar teljara með window.clearInterval á this.interval\n   */\n  stopCounter() {\n    window.clearInterval(this.interval);\n  }\n\n  /**\n   * Býr til element sem heldur utan um teljara, á forminu:\n   * <div class=\"countdown__box\">\n   *   <span class=\"countdown__num\">num</span>\n   *   <span class=\"countdown__title\">title</span>\n   * </div>\n   * og skilar element\n   */\n  createElement(num, title) {\n    const a = document.createElement('div');\n    const b = document.createElement('span');\n    const c = document.createElement('span');\n\n    a.classList.add('countdown__box');\n    b.classList.add('countdown__num');\n    c.classList.add('countdown__title');\n\n    b.innerHTML = num;\n    c.innerHTML = title;\n\n    a.appendChild(b);\n    a.appendChild(c);\n    this.element.appendChild(a);\n  }\n\n  /**\n   * Eyðir niðurteljara með því að fjarlægja úr localStorage og\n   * fjarlægja allt úr this.container.\n   * Kallar líka í this.stopCounter() og this.showForm()\n   */\n  delete() {\n    this.container.innerHTML = null;\n    window.localStorage.removeItem(this.keyName);\n    this.stopCounter();\n    this.showForm();\n  }\n\n  /**\n   * Tekur við remaining sem eru millisekúndur í dagsetningu sem talið er\n   * niður í.\n   * Útbýr og skilar element sem inniheldur element fyrir daga, klukkustundir,\n   * mínútur og sekúndur þar til remaining gerist. Hver „partur“ er búinn til\n   * með kalli í this.createElement\n   */\n  countdown(remaining) {\n    let s = remaining / 1000;\n\n    const days = Math.floor(s / (60 * 60 * 24));\n    s %= (60 * 60 * 24);\n    const hours = Math.floor(s / (60 * 60));\n    s %= (60 * 60);\n    const mins = Math.floor(s / 60);\n    s %= 60;\n    const secs = Math.floor(s);\n\n    this.createElement(days, 'Dagar');\n    this.createElement(hours, 'Klst');\n    this.createElement(mins, 'Mín');\n    this.createElement(secs, 'Sek');\n  }\n\n  /**\n   * Telur niður.\n   * Fjarlægir allt úr this.element (ef eitthvað er þar) og athugar síðan hvort\n   * this.date (dagsetning sem talið er niður að) sé liðin og ef svo er birtir\n   * textann \"Komið!\" og stoppa teljara með this.stopCounter()\n   * Ef ekki liðið uppfærir teljara með því að bæta element úr this.countdown()\n   * við this.element\n   */\n  count() {\n    const remaining = this.date - Date.now();\n    this.element.innerHTML = null;\n    if (remaining <= 0) {\n      const p = document.createElement('p');\n      p.innerHTML = 'Komið!';\n      p.classList.add('countdown__buid');\n      this.element.appendChild(p);\n      this.stopCounter();\n    } else {\n      this.countdown(remaining);\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const countdown = new Countdown();\n  countdown.load();\n});\n"]}